@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================
   ASSOCIATION ESPOIR - DESIGN SYSTEM
   Premium Moroccan Charity Website
   ============================================ */

/* Material Symbols Outlined Font */
@font-face {
  font-family: 'Material Symbols Outlined';
  font-style: normal;
  font-weight: 100 700;
  src: url(https://fonts.gstatic.com/s/materialsymbolsoutlined/v232/kJEhBvYX7BgnkSrUwT8OhrdQw4oELdPIeeII9v6oFsLjBuVY.woff2) format('woff2');
  font-display: block; /* Prevent flash of unstyled text */
}

.material-symbols-outlined {
  font-family: 'Material Symbols Outlined';
  font-weight: normal;
  font-style: normal;
  font-size: 24px;
  line-height: 1;
  letter-spacing: normal;
  text-transform: none;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  white-space: nowrap;
  word-wrap: normal;
  direction: ltr;
  -webkit-font-feature-settings: 'liga';
  -webkit-font-smoothing: antialiased;
  font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
  overflow: hidden;
  width: 24px;
  height: 24px;
}

/* Hide icon text until font loads */
.material-symbols-outlined:empty::before {
  content: '';
  display: inline-block;
  width: 24px;
  height: 24px;
}

.material-symbols-outlined.filled,
.material-symbols-outlined.fill-1 {
  font-variation-settings: 'FILL' 1, 'wght' 400, 'GRAD' 0, 'opsz' 24;
}

/* RTL support for Material Symbols */
[dir="rtl"] .material-symbols-outlined {
  transform: scaleX(-1);
}

[dir="rtl"] .material-symbols-outlined.no-flip {
  transform: none;
}

@layer base {
  :root {
    /* ============================================
       DESIGN TOKENS - CSS VARIABLES
       ============================================ */
    
    /* Primary Colors */
    --color-primary: #0d7477;
    --color-primary-light: #0c7579;
    --color-primary-dark: #0A5F62;
    --color-primary-10: rgba(13, 116, 119, 0.1);
    --color-primary-20: rgba(13, 116, 119, 0.2);
    --color-primary-30: rgba(13, 116, 119, 0.3);
    --color-primary-50: rgba(13, 116, 119, 0.5);
    
    /* Background Colors */
    --color-bg-light: #f6f8f8;
    --color-bg-soft: #F8FAFA;
    --color-bg-white: #FFFFFF;
    --color-bg-dark: #112121;
    --color-bg-dark-card: #1a2e2e;
    --color-bg-teal-wash: #F0F7F7;
    --color-bg-sage-light: #E8F1F2;
    
    /* Text Colors */
    --color-text-primary: #0e1a1b;
    --color-text-secondary: #64748b;
    --color-text-muted: #94a3b8;
    --color-text-white: #FFFFFF;
    
    /* Semantic Colors */
    --color-success: #22c55e;
    --color-warning: #f59e0b;
    --color-error: #ef4444;
    --color-info: #0d7477;
    
    /* Border Colors */
    --color-border-light: #E5E9EB;
    --color-border-default: #e2e8f0;
    --color-border-primary: rgba(13, 116, 119, 0.2);
    
    /* Typography */
    --font-display: 'Inter', sans-serif;
    --font-arabic: 'Tajawal', sans-serif;
    --font-light: 300;
    --font-normal: 400;
    --font-medium: 500;
    --font-semibold: 600;
    --font-bold: 700;
    --font-black: 900;
    
    /* Font Sizes */
    --text-xs: 0.625rem;    /* 10px */
    --text-sm: 0.75rem;     /* 12px */
    --text-base: 0.875rem;  /* 14px */
    --text-md: 1rem;        /* 16px */
    --text-lg: 1.125rem;    /* 18px */
    --text-xl: 1.25rem;     /* 20px */
    --text-2xl: 1.5rem;     /* 24px */
    --text-3xl: 1.75rem;    /* 28px */
    --text-4xl: 2rem;       /* 32px */
    
    /* Line Heights */
    --leading-tight: 1.25;
    --leading-normal: 1.5;
    --leading-relaxed: 1.625;
    
    /* Letter Spacing */
    --tracking-tight: -0.015em;
    --tracking-normal: 0;
    --tracking-wide: 0.05em;
    --tracking-wider: 0.1em;
    --tracking-widest: 0.2em;
    
    /* Spacing */
    --space-1: 4px;
    --space-2: 8px;
    --space-3: 12px;
    --space-4: 16px;
    --space-5: 20px;
    --space-6: 24px;
    --space-8: 32px;
    --space-10: 40px;
    --space-12: 48px;
    
    /* Container Padding */
    --px-mobile: 1rem;
    --px-tablet: 1.5rem;
    --px-desktop: 2rem;
    
    /* Border Radius */
    --radius-sm: 0.5rem;    /* 8px */
    --radius-md: 0.75rem;   /* 12px */
    --radius-lg: 1rem;      /* 16px */
    --radius-xl: 1.5rem;    /* 24px */
    --radius-2xl: 2rem;     /* 32px */
    --radius-full: 9999px;
    
    /* Shadows */
    --shadow-sm: 0 1px 2px rgba(0,0,0,0.05);
    --shadow-md: 0 4px 6px -1px rgba(0,0,0,0.1);
    --shadow-lg: 0 10px 15px -3px rgba(0,0,0,0.1);
    --shadow-xl: 0 20px 25px -5px rgba(0,0,0,0.1);
    --shadow-primary: 0 4px 14px rgba(13,116,119,0.25);
    --shadow-ios: 0 2px 12px rgba(0,0,0,0.04);
    
    /* Animation Easings */
    --ease-out-expo: cubic-bezier(0.16, 1, 0.3, 1);
    --ease-out-quart: cubic-bezier(0.25, 1, 0.5, 1);
    --ease-out-back: cubic-bezier(0.34, 1.56, 0.64, 1);
    --ease-spring: cubic-bezier(0.175, 0.885, 0.32, 1.275);
    
    /* Safe Area Insets (for mobile) */
    --safe-top: env(safe-area-inset-top, 0px);
    --safe-bottom: env(safe-area-inset-bottom, 0px);
    --safe-left: env(safe-area-inset-left, 0px);
    --safe-right: env(safe-area-inset-right, 0px);
  }

  /* Dark Mode Variables - Enhanced */
  .dark {
    /* Background Colors - Deep Teal/Slate */
    --color-bg-light: #0e1b1b;
    --color-bg-soft: #1a2e2e;
    --color-bg-white: #142828;
    --color-bg-dark-card: #1a2e2e;
    --color-bg-teal-wash: rgba(13, 116, 119, 0.1);
    
    /* Text Colors - Improved Contrast */
    --color-text-primary: #f1f5f9;
    --color-text-secondary: #94a3b8;
    --color-text-muted: #64748b;
    --color-text-white: #f1f5f9;
    
    /* Border Colors */
    --color-border-light: rgba(255,255,255,0.08);
    --color-border-default: rgba(255,255,255,0.12);
    --color-border-primary: rgba(13, 116, 119, 0.3);
  }

  * {
    @apply border-[var(--color-border-default)];
  }

  html {
    @apply antialiased;
    scroll-behavior: smooth;
  }

  body {
    font-family: var(--font-display);
    background-color: var(--color-bg-light);
    color: var(--color-text-primary);
    font-feature-settings: "kern" 1, "liga" 1;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  /* Selection */
  ::selection {
    background-color: var(--color-primary-20);
    color: var(--color-primary-dark);
  }

  /* Reduced Motion */
  @media (prefers-reduced-motion: reduce) {
    html {
      scroll-behavior: auto;
    }
    
    *, *::before, *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }

  /* RTL Support */
  [dir="rtl"] {
    direction: rtl;
  }

  [dir="rtl"] .rtl-flip {
    transform: scaleX(-1);
  }

  [dir="rtl"] .rtl-space-x-reverse > :not([hidden]) ~ :not([hidden]) {
    --tw-space-x-reverse: 1;
  }
}

@layer components {
  /* ============================================
     GLASSMORPHISM UTILITIES
     ============================================ */
  
  .glass {
    background: rgba(255, 255, 255, 0.7);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border: 1px solid rgba(255, 255, 255, 0.3);
  }

  .glass-dark {
    background: rgba(17, 33, 33, 0.7);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border: 1px solid rgba(255, 255, 255, 0.1);
  }

  .glass-card {
    background: rgba(255, 255, 255, 0.85);
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
    border: 1px solid rgba(255, 255, 255, 0.4);
    border-radius: var(--radius-lg);
  }

  .dark .glass-card {
    background: rgba(26, 46, 46, 0.85);
    border: 1px solid rgba(255, 255, 255, 0.1);
  }

  /* ============================================
     BUTTON STYLES
     ============================================ */
  
  .btn {
    @apply inline-flex items-center justify-center gap-2
           font-semibold transition-all duration-300 ease-out
           focus:outline-none focus:ring-2 focus:ring-offset-2
           disabled:opacity-50 disabled:cursor-not-allowed
           active:scale-[0.98];
  }

  .btn-primary {
    @apply btn px-6 py-3.5 rounded-xl
           bg-primary text-white
           shadow-primary
           hover:bg-primary-600 hover:shadow-lg
           focus:ring-primary/30;
  }

  .btn-secondary {
    @apply btn px-6 py-3.5 rounded-xl
           bg-white text-primary
           border-2 border-primary
           hover:bg-primary/5;
  }

  .btn-ghost {
    @apply btn px-4 py-2.5 rounded-xl
           text-text-secondary
           hover:bg-background-teal-wash hover:text-primary;
  }

  .btn-danger {
    @apply btn px-6 py-3.5 rounded-xl
           bg-error text-white
           hover:bg-error-600
           focus:ring-error/30;
  }

  .btn-icon {
    @apply btn w-10 h-10 rounded-full p-0
           bg-primary/10 text-primary
           hover:bg-primary/20;
  }

  /* Button Sizes */
  .btn-sm {
    @apply h-10 px-4 text-sm;
  }

  .btn-md {
    @apply h-12 px-6 text-base;
  }

  .btn-lg {
    @apply h-14 px-8 text-lg;
  }

  /* ============================================
     CARD STYLES
     ============================================ */
  
  .card {
    @apply bg-white rounded-xl border border-border-light
           shadow-sm transition-all duration-300
           hover:shadow-md hover:border-primary/20;
  }

  .card-flat {
    @apply bg-white rounded-xl border border-border-light
           transition-all duration-300;
  }

  .card-elevated {
    @apply bg-white rounded-xl shadow-lg
           transition-all duration-300
           hover:shadow-xl;
  }

  /* ============================================
     INPUT STYLES
     ============================================ */
  
  .input {
    @apply w-full h-14 px-4
           bg-white border border-border rounded-xl
           text-text-primary placeholder:text-text-muted
           transition-all duration-200
           focus:border-primary focus:ring-2 focus:ring-primary/20
           focus:outline-none;
  }

  .input-filled {
    @apply w-full h-14 px-4
           bg-background-teal-wash border border-transparent rounded-xl
           text-text-primary placeholder:text-text-muted
           transition-all duration-200
           focus:bg-white focus:border-primary focus:ring-2 focus:ring-primary/20
           focus:outline-none;
  }

  .input-with-icon {
    @apply input pl-12;
  }

  .input-with-icon-right {
    @apply input pr-12;
  }

  /* ============================================
     LAYOUT UTILITIES
     ============================================ */
  
  .container-mobile {
    @apply max-w-mobile mx-auto px-4;
  }

  .container-tablet {
    @apply max-w-tablet mx-auto px-6;
  }

  .container-desktop {
    @apply max-w-desktop mx-auto px-8;
  }

  .page-container {
    @apply min-h-screen bg-background-light pb-24 md:pb-8;
  }

  .sticky-header {
    @apply sticky top-0 z-50
           bg-background-light/80 backdrop-blur-md
           border-b border-border;
  }

  /* ============================================
     TYPOGRAPHY UTILITIES
     ============================================ */
  
  .text-gradient {
    @apply bg-clip-text text-transparent bg-gradient-to-r from-primary to-primary-light;
  }

  .text-overline {
    @apply text-xs font-bold uppercase tracking-widest text-primary;
  }

  .section-title {
    @apply text-2xl font-bold text-text-primary;
  }

  /* ============================================
     BADGE STYLES
     ============================================ */
  
  .badge {
    @apply inline-flex items-center px-2.5 py-0.5
           text-xs font-semibold rounded-full;
  }

  .badge-primary {
    @apply badge bg-primary/10 text-primary;
  }

  .badge-success {
    @apply badge bg-success/10 text-success;
  }

  .badge-warning {
    @apply badge bg-warning/10 text-warning;
  }

  .badge-error {
    @apply badge bg-error/10 text-error;
  }

  .badge-neutral {
    @apply badge bg-background-teal-wash text-text-secondary;
  }

  /* ============================================
     PROGRESS BAR
     ============================================ */
  
  .progress-bar {
    @apply w-full h-2 bg-background-teal-wash rounded-full overflow-hidden;
  }

  .progress-bar-fill {
    @apply h-full bg-primary rounded-full transition-all duration-500 ease-out;
  }

  /* ============================================
     NAVIGATION
     ============================================ */
  
  .nav-link {
    @apply text-text-secondary hover:text-primary
           transition-colors duration-200
           font-medium;
  }

  .nav-link-active {
    @apply text-primary font-semibold;
  }

  /* Bottom Navigation */
  .bottom-nav {
    @apply fixed bottom-0 left-0 right-0 z-50
           bg-white/95 backdrop-blur-lg
           border-t border-border-light
           safe-area-pb;
  }

  .bottom-nav-item {
    @apply flex flex-col items-center justify-center gap-1
           py-2 px-4 text-xs text-text-muted
           transition-colors duration-200;
  }

  .bottom-nav-item-active {
    @apply text-primary;
  }
}

@layer utilities {
  /* ============================================
     UTILITY CLASSES
     ============================================ */
  
  /* Safe area utilities for mobile */
  .safe-area-top {
    padding-top: var(--safe-top);
  }

  .safe-area-bottom {
    padding-bottom: var(--safe-bottom);
  }

  .safe-area-pb {
    padding-bottom: calc(var(--safe-bottom) + 1rem);
  }

  /* Hide scrollbar */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  /* Line clamp utilities */
  .line-clamp-1 {
    display: -webkit-box;
    -webkit-line-clamp: 1;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  /* Aspect ratios */
  .aspect-project {
    aspect-ratio: 16 / 10;
  }

  .aspect-card {
    aspect-ratio: 4 / 3;
  }

  /* Touch action utilities */
  .touch-manipulation {
    touch-action: manipulation;
  }

  /* Animation delay utilities */
  .animation-delay-100 {
    animation-delay: 100ms;
  }

  .animation-delay-200 {
    animation-delay: 200ms;
  }

  .animation-delay-300 {
    animation-delay: 300ms;
  }

  .animation-delay-400 {
    animation-delay: 400ms;
  }

  /* Focus visible utility */
  .focus-ring {
    @apply focus:outline-none focus:ring-2 focus:ring-primary/30 focus:ring-offset-2;
  }

  /* Glass effect utility */
  .glass-effect {
    background: rgba(255, 255, 255, 0.15);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    border: 1px solid rgba(255, 255, 255, 0.2);
  }

  /* Hide scrollbar utility */
  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }
  .no-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  /* ============================================
     DARK MODE TRANSITION
     ============================================ */
  
  html, body {
    @apply transition-colors duration-300 ease-out;
  }
  
  /* Smooth transition for all elements with color changes */
  *, *::before, *::after {
    @apply transition-colors duration-200;
  }
  
  /* Exclude transform and opacity from the transition to prevent performance issues */
  .transform-gpu {
    transition-property: transform;
  }
  
  /* ============================================
     DARK MODE COMPONENT OVERRIDES
     ============================================ */
  
  /* Form inputs in dark mode */
  .dark input,
  .dark textarea,
  .dark select {
    @apply bg-slate-800 border-slate-700 text-white placeholder-slate-500;
  }
  
  .dark input:focus,
  .dark textarea:focus,
  .dark select:focus {
    @apply ring-primary/30 border-primary;
  }
  
  /* Cards in dark mode */
  .dark .card {
    @apply bg-slate-800 border-slate-700;
  }
  
  /* Tables in dark mode */
  .dark table {
    @apply border-slate-700;
  }
  
  .dark th,
  .dark td {
    @apply border-slate-700 text-slate-200;
  }
  
  .dark thead {
    @apply bg-slate-800/50;
  }
  
  .dark tbody tr:hover {
    @apply bg-slate-700/30;
  }
  
  /* Dropdowns and modals */
  .dark [role="dialog"],
  .dark [role="listbox"] {
    @apply bg-slate-800 border-slate-700;
  }
  
  /* Scrollbars in dark mode */
  .dark ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }
  
  .dark ::-webkit-scrollbar-track {
    @apply bg-slate-900;
  }
  
  .dark ::-webkit-scrollbar-thumb {
    @apply bg-slate-700 rounded-full;
  }
  
  .dark ::-webkit-scrollbar-thumb:hover {
    @apply bg-slate-600;
  }
}
